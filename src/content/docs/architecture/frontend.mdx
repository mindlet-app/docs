---
title: Frontend - React Native
description: Documentation technique de l'application mobile React Native
sidebar:
  order: 3
---

import { Aside, Badge, Card, CardGrid, TabItem, Tabs } from '@astrojs/starlight/components';

# üì± Frontend React Native

<Badge text="React Native" variant="success" />
<Badge text="Expo" variant="note" />
<Badge text="TypeScript" variant="caution" />

## Pr√©sentation

L'application mobile Mindlet est d√©velopp√©e avec **React Native** et **Expo**, permettant un d√©ploiement cross-platform sur **iOS** et **Android** √† partir d'une base de code unique.

## Stack technique

| Composant | Technologie | R√¥le |
|-----------|-------------|------|
| **Framework** | React Native | Base de l'application |
| **Toolchain** | Expo | Build, d√©ploiement, OTA updates |
| **Langage** | TypeScript | Typage statique |
| **√âtat global** | Zustand | Gestion d'√©tat l√©g√®re |
| **Navigation** | React Navigation | Navigation entre √©crans |
| **Styling** | NativeWind | Tailwind CSS pour RN |
| **HTTP Client** | Axios | Requ√™tes API |
| **Forms** | React Hook Form | Gestion des formulaires |
| **Validation** | Zod | Validation des sch√©mas |

## Architecture du code

```mermaid
flowchart TD
    subgraph src["üìÅ src"]
        subgraph app["üìÅ app - √âcrans file-based routing"]
            auth["(auth) - Authentification"]
            tabs["(tabs) - Navigation principale"]
            layout["_layout.tsx - Layout racine"]
        end
        subgraph components["üìÅ components - R√©utilisables"]
            ui["ui/ - Composants UI de base"]
            cards["cards/ - Composants cartes"]
            collections["collections/ - Composants collections"]
        end
        hooks["üìÅ hooks - Custom hooks"]
        services["üìÅ services - Services API"]
        stores["üìÅ stores - Stores Zustand"]
        types["üìÅ types - Types TypeScript"]
        utils["üìÅ utils - Utilitaires"]
        constants["üìÅ constants - Constantes"]
    end
    
    style src fill:#f5f5f5,stroke:#333
    style app fill:#e8f5e9,stroke:#388e3c
    style components fill:#fff3e0,stroke:#f57c00
```

## Captures d'√©cran

<CardGrid>
  <Card title="Accueil">
    ![√âcran d'accueil](../../../assets/app-screenshots/IMG_1398.PNG)
  </Card>
  <Card title="Collections">
    ![Collections](../../../assets/app-screenshots/IMG_1401.PNG)
  </Card>
  <Card title="R√©vision">
    ![R√©vision](../../../assets/app-screenshots/IMG_1405.PNG)
  </Card>
  <Card title="Profil">
    ![Profil](../../../assets/app-screenshots/IMG_1410.PNG)
  </Card>
</CardGrid>

## Gestion d'√©tat avec Zustand

<Tabs>
  <TabItem label="Auth Store">
    ```typescript
    interface AuthState {
      user: User | null;
      token: string | null;
      isAuthenticated: boolean;
      login: (email: string, password: string) => Promise<void>;
      logout: () => void;
      refreshToken: () => Promise<void>;
    }

    export const useAuthStore = create<AuthState>()(
      persist(
        (set, get) => ({
          user: null,
          token: null,
          isAuthenticated: false,
          
          login: async (email, password) => {
            const response = await authService.login(email, password);
            set({
              user: response.user,
              token: response.token,
              isAuthenticated: true,
            });
          },
          
          logout: () => {
            set({ user: null, token: null, isAuthenticated: false });
          },
        }),
        { name: 'auth-storage' }
      )
    );
    ```
  </TabItem>
  
  <TabItem label="Collections Store">
    ```typescript
    interface CollectionsState {
      collections: Collection[];
      isLoading: boolean;
      fetchCollections: () => Promise<void>;
      createCollection: (data: CreateCollectionDTO) => Promise<Collection>;
      deleteCollection: (id: number) => Promise<void>;
    }

    export const useCollectionsStore = create<CollectionsState>((set, get) => ({
      collections: [],
      isLoading: false,
      
      fetchCollections: async () => {
        set({ isLoading: true });
        try {
          const collections = await collectionsService.getAll();
          set({ collections, isLoading: false });
        } catch (error) {
          set({ isLoading: false });
          throw error;
        }
      },
      
      createCollection: async (data) => {
        const collection = await collectionsService.create(data);
        set((state) => ({
          collections: [...state.collections, collection],
        }));
        return collection;
      },
    }));
    ```
  </TabItem>
</Tabs>

## Services API

### Configuration Axios

```typescript
import axios from 'axios';
import { useAuthStore } from '@/stores/authStore';

const api = axios.create({
  baseURL: process.env.EXPO_PUBLIC_API_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Intercepteur pour ajouter le token
api.interceptors.request.use((config) => {
  const token = useAuthStore.getState().token;
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Intercepteur pour g√©rer les erreurs
api.interceptors.response.use(
  (response) => response,
  async (error) => {
    if (error.response?.status === 401) {
      useAuthStore.getState().logout();
    }
    return Promise.reject(error);
  }
);

export default api;
```

### Service exemple

```typescript
class CardsService {
  async getAll(collectionId: number): Promise<Card[]> {
    const response = await api.get(`/cards`, {
      params: { collection_id: collectionId },
    });
    return response.data.data;
  }
  
  async create(data: CreateCardDTO): Promise<Card> {
    const response = await api.post('/cards', data);
    return response.data.data;
  }
  
  async generateFromDocument(documentId: number): Promise<Card[]> {
    const response = await api.post('/cards/generate', {
      document_id: documentId,
    });
    return response.data.data;
  }
}

export const cardsService = new CardsService();
```

## Composants UI

### Syst√®me de design

Nous utilisons **NativeWind** (Tailwind CSS pour React Native) pour un styling coh√©rent :

```tsx
import { View, Text, TouchableOpacity } from 'react-native';

interface ButtonProps {
  title: string;
  onPress: () => void;
  variant?: 'primary' | 'secondary' | 'outline';
  disabled?: boolean;
}

export function Button({ 
  title, 
  onPress, 
  variant = 'primary',
  disabled = false 
}: ButtonProps) {
  const variants = {
    primary: 'bg-indigo-600 text-white',
    secondary: 'bg-gray-200 text-gray-800',
    outline: 'border-2 border-indigo-600 text-indigo-600',
  };

  return (
    <TouchableOpacity
      onPress={onPress}
      disabled={disabled}
      className={`
        px-6 py-3 rounded-xl items-center justify-center
        ${variants[variant]}
        ${disabled ? 'opacity-50' : ''}
      `}
    >
      <Text className="font-semibold text-base">{title}</Text>
    </TouchableOpacity>
  );
}
```

### Composant Flashcard

```tsx
import { useState } from 'react';
import { View, Text, Pressable } from 'react-native';
import Animated, { 
  useSharedValue, 
  useAnimatedStyle, 
  withSpring 
} from 'react-native-reanimated';

interface FlashcardProps {
  question: string;
  answer: string;
}

export function Flashcard({ question, answer }: FlashcardProps) {
  const [isFlipped, setIsFlipped] = useState(false);
  const rotation = useSharedValue(0);

  const flipCard = () => {
    rotation.value = withSpring(isFlipped ? 0 : 180);
    setIsFlipped(!isFlipped);
  };

  const frontStyle = useAnimatedStyle(() => ({
    transform: [{ rotateY: `${rotation.value}deg` }],
    backfaceVisibility: 'hidden',
  }));

  const backStyle = useAnimatedStyle(() => ({
    transform: [{ rotateY: `${rotation.value + 180}deg` }],
    backfaceVisibility: 'hidden',
  }));

  return (
    <Pressable onPress={flipCard} className="w-full aspect-[3/4]">
      <Animated.View 
        style={frontStyle}
        className="absolute inset-0 bg-white rounded-2xl p-6 shadow-lg"
      >
        <Text className="text-xl font-semibold text-center">
          {question}
        </Text>
      </Animated.View>
      
      <Animated.View 
        style={backStyle}
        className="absolute inset-0 bg-indigo-600 rounded-2xl p-6 shadow-lg"
      >
        <Text className="text-xl font-semibold text-center text-white">
          {answer}
        </Text>
      </Animated.View>
    </Pressable>
  );
}
```

## Navigation

### Structure de navigation

```tsx
import { Stack, Tabs } from 'expo-router';

// Layout principal avec tabs
export default function TabsLayout() {
  return (
    <Tabs screenOptions={{ headerShown: false }}>
      <Tabs.Screen
        name="home"
        options={{
          title: 'Accueil',
          tabBarIcon: ({ color }) => <HomeIcon color={color} />,
        }}
      />
      <Tabs.Screen
        name="collections"
        options={{
          title: 'Collections',
          tabBarIcon: ({ color }) => <FolderIcon color={color} />,
        }}
      />
      <Tabs.Screen
        name="explore"
        options={{
          title: 'Explorer',
          tabBarIcon: ({ color }) => <SearchIcon color={color} />,
        }}
      />
      <Tabs.Screen
        name="profile"
        options={{
          title: 'Profil',
          tabBarIcon: ({ color }) => <UserIcon color={color} />,
        }}
      />
    </Tabs>
  );
}
```

## Accessibilit√©

<Aside type="tip">
  Mindlet est con√ßue pour √™tre **accessible √† tous**, y compris les personnes ayant des troubles de l'apprentissage.
</Aside>

### Fonctionnalit√©s d'accessibilit√©

| Fonctionnalit√© | Impl√©mentation |
|----------------|----------------|
| **VoiceOver/TalkBack** | Labels accessibles sur tous les √©l√©ments interactifs |
| **Police adapt√©e** | Option de police OpenDyslexic pour la dyslexie |
| **Contraste √©lev√©** | Mode contraste pour malvoyants |
| **Taille de texte** | Respect des pr√©f√©rences syst√®me |
| **Animations r√©duites** | Respect de `prefers-reduced-motion` |

```tsx
<TouchableOpacity
  accessible={true}
  accessibilityLabel="Retourner la carte pour voir la r√©ponse"
  accessibilityRole="button"
  accessibilityHint="Double-tap pour retourner"
  onPress={flipCard}
>
  {/* Contenu */}
</TouchableOpacity>
```

## Performance

### Optimisations appliqu√©es

- **Lazy loading** : Chargement diff√©r√© des √©crans
- **Memoization** : `useMemo` et `useCallback` pour √©viter les re-renders
- **FlatList virtualization** : Affichage optimis√© des longues listes
- **Image caching** : Cache des images avec expo-image
- **Bundle splitting** : S√©paration du code par routes

---

*Application mobile pens√©e pour l'exp√©rience utilisateur et l'accessibilit√©.*
